<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta property="og:title" content="Word Wheel Deluxe">
    <meta property="og:description" content="Be a champ! Solve the Word Wheel before your power runs out!">
    <meta property="og:image" content="https://github.com/cuppatom99/word-wheel/blob/main/HEC-click-to-get-you-copy-cover-image.png?raw=true">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <title>Word Wheel Deluxe</title>
    <style>
        :root {
            --purple: #3d1f6e; --orange: #f2631a; --yellow: #ffd447;
            --blue: #54baf7; --white: #ffffff; --black: #000000;
            --green: #5FAD56; --alert: #FF9800; --red: #AB2346;
            --grey: #e0e0e0; --light-grey: #f2f2f2;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
        
        body {
            margin: 0; padding: 10px 15px; background: var(--orange);
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }

        .status-bar {
            display: flex; justify-content: center; align-items: center;
            width: 100%; max-width: 550px; margin-bottom: 10px; gap: 10px;
        }
        .status-item {
            background: var(--white); border: 2px solid var(--black);
            padding: 5px 10px; border-radius: 12px; font-weight: 900;
            font-size: 0.75rem; box-shadow: 0 3px 0 var(--black);
            flex: 1; text-align: center;
        }

        .game-card {
            background: var(--white); width: 100%; max-width: 550px;
            border-radius: 30px; padding: 25px; text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2); position: relative;
            overflow: hidden; min-height: 520px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        .power-bar-container {
            position: absolute; top: 40px; bottom: 40px; left: 15px; width: 22px;
            background: #333; border: 3px solid var(--black); border-radius: 4px;
            overflow: hidden; z-index: 10;
        }
        .power-fill {
            position: absolute; bottom: 0; width: 100%; height: 100%;
            background: var(--green);
            transition: height 0.2s ease, background-color 0.4s;
        }

        #splash { width: 100%; display: flex; flex-direction: column; align-items: center; }
        
        .title-container { margin-bottom: 20px; width: 100%; text-align: center; }
        .title-letter {
            font-size: 2.8rem; font-weight: 900; color: var(--purple);
            text-shadow: 3px 3px 0 var(--yellow); display: inline-block;
            animation: bounceIn 0.8s cubic-bezier(0.36, 0, 0.66, -0.56) backwards;
        }
        @keyframes bounceIn { 0% { opacity: 0; transform: scale(0.3) translateY(-100px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

        .level-tracker { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; font-weight: 900; font-size: 1.2rem; }
        .lvl-step { color: #ccc; transition: 0.3s; }
        .lvl-step.active { color: var(--purple); transform: scale(1.2); text-decoration: underline; }

        .game-grid { display: flex; justify-content: center; gap: 6px; margin: 20px 0; padding-left: 20px; }
        .column-group { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        
        .wheel-window {
            width: clamp(40px, 12vw, 60px); height: 110px; 
            background: #eee; border-radius: 12px; overflow: hidden;
            position: relative; border: 3px solid var(--black);
        }
        .wheel-window::after {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.15) 0%, transparent 25%, transparent 75%, rgba(0,0,0,0.15) 100%);
            pointer-events: none;
        }

        .wheel-strip { display: flex; flex-direction: column; }
        .letter-cell {
            height: 55px; width: 100%; display: flex; align-items: center; 
            justify-content: center; font-size: 1.6rem; font-weight: 900;
            background: white; border-bottom: 1px solid #ddd; color: var(--purple);
        }

        .letter-cell.correct { background: var(--green) !important; color: white !important; animation: sparklePulse 0.4s ease infinite alternate; }
        .letter-cell.clue-flash { background: var(--yellow) !important; color: var(--purple) !important; }

        @keyframes sparklePulse { from { box-shadow: inset 0 0 0px var(--yellow); } to { box-shadow: inset 0 0 15px var(--yellow); transform: scale(1.02); } }

        .arrow-btn {
            background: var(--grey); border: 2px solid var(--black);
            border-radius: 8px; cursor: pointer; font-size: 1rem;
            height: 35px; width: 100%; box-shadow: 0 3px 0 var(--black);
        }
        .arrow-btn:active, .action-btn:active { 
            background: var(--yellow) !important; color: var(--purple) !important;
            transform: translateY(2px); box-shadow: none !important; 
        }

        .button-stack { display: flex; flex-direction: column; gap: 10px; margin: 0 auto; width: 100%; max-width: 300px; }
        .action-btn {
            padding: 15px 5px; border-radius: 15px; border: 3px solid var(--black);
            font-weight: 900; font-size: 1rem; cursor: pointer;
            box-shadow: 0 5px 0 var(--black); transition: 0.05s;
        }
        
        .btn-submit { background: var(--blue); color: white; width: 100%; }
        .btn-share { background: var(--white); color: var(--purple); border: 3px solid var(--purple); }
        .btn-white { background: var(--white); color: var(--black); flex: 1; }

        #msg-box { min-height: 55px; margin: 10px 0; font-weight: 800; color: var(--purple); font-size: 0.95rem; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
        
        .victory-text { font-size: 1.3rem; line-height: 1.3; color: var(--purple); margin: 10px 0; font-weight: 900; }
        .book-promo-container { display: flex; flex-direction: column; align-items: center; gap: 15px; margin: 15px 0; }
        .book-link img { width: 280px; max-width: 90%; border-radius: 10px; }
        
        .promo-box {
            background: var(--yellow); color: var(--purple);
            padding: 12px; border-radius: 15px; border: 2px solid var(--purple);
            font-weight: 800; font-size: 0.95rem; line-height: 1.4;
        }

        #share-status { font-size: 1rem; margin-top: 5px; color: var(--purple); font-weight: 900; }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="status-item">LVL: <span id="stat-lvl">1</span></div>
        <div class="status-item">TIME: <span id="stat-time">0:00</span></div>
        <div id="sound-toggle" class="status-item" style="cursor:pointer" onclick="toggleSound()">SND: ON</div>
    </div>

    <div class="game-card">
        <div id="pb-container" class="power-bar-container hidden"><div class="power-fill" id="fill-bar"></div></div>

        <div id="splash">
            <div class="title-container">
                <div id="title-1"></div><div id="title-2"></div>
            </div>
            <button class="action-btn btn-submit" style="background: var(--yellow); color: var(--purple); width: 220px;" onclick="initGame()">PLAY NOW</button>
        </div>

        <div id="game-area" class="hidden" style="width: 100%;">
            <div id="main-ui">
                <div class="level-tracker">
                    <span class="lvl-step" id="lvl-step-1">1</span>
                    <span class="lvl-step" id="lvl-step-2">2</span>
                    <span class="lvl-step" id="lvl-step-3">3</span>
                </div>
                <div id="main-grid" class="game-grid"></div>
                <div id="msg-box">Find the hidden words!</div>
                <div class="button-stack">
                    <button id="btn-submit-game" class="action-btn btn-submit" onclick="checkSolution()">SUBMIT</button>
                    <div id="secondary-btns" style="display:flex; gap:8px">
                        <button class="action-btn btn-white" onclick="giveClue()">CLUE</button>
                        <button class="action-btn btn-white" onclick="shuffleWheels(true)">SHUFFLE</button>
                    </div>
                </div>
            </div>

            <div id="victory-ui" class="hidden">
                <p class="victory-text">CONGRATULATIONS!<br>YOU ARE THE WORD WHEEL MASTER!</p>
                <div class="book-promo-container">
                    <a href="https://www.waterstones.com/book/ham-ed-and-chips/tom-phipps/9780722356852" target="_blank" class="book-link">
                        <img src="https://github.com/cuppatom99/word-wheel/blob/main/HEC-click-to-get-you-copy-cover-image.png?raw=true" alt="Ham Ed and Chips Book Cover">
                    </a>
                    <div class="promo-box">Be a true champ and buy a copy of this <i>wheely</i> good book!</div>
                </div>
                <div class="button-stack">
                    <button class="action-btn btn-share" onclick="shareScore()">SHARE SCORE ðŸ“¤</button>
                    <div id="share-status" class="hidden">Link Copied! Paste it anywhere!</div>
                    <button class="action-btn btn-submit" style="background: var(--yellow); color: var(--purple);" onclick="restartGame()">PLAY AGAIN</button>
                </div>
            </div>

            <div id="game-over-ui" class="hidden">
                <p class="victory-text" style="color:var(--red); font-size: 2rem; margin-bottom: 30px;">GAME OVER!<br><span style="font-size: 1.2rem; color: var(--purple)">POWER DEPLETED</span></p>
                <button class="action-btn btn-submit" style="background: var(--yellow); color: var(--purple); width: 200px;" onclick="restartGame()">TRY AGAIN</button>
            </div>
        </div>
    </div>

<script>
    const dict = {
        3: ["THE", "AND", "FOR", "ARE", "BUT", "NOT", "YOU", "ALL", "ANY", "CAN", "HAD", "HER", "WAS", "ONE", "OUR", "OUT", "DAY", "GET", "HAS", "HIM", "HIS", "HOW", "MAN", "NEW", "NOW", "OLD", "SEE", "TWO", "WAY", "WHO", "BOY", "DID", "ITS", "LET", "PUT", "SAY", "SHE", "TOO", "USE", "ACT", "BIG", "END", "LAW", "SET", "TOP", "WAR", "AIR", "EYE", "OFF", "TEN", "FLY", "RED", "ICE", "TEA", "ART", "BED", "RUN", "MAP", "OIL", "KEY", "EAT", "LOW", "SIR", "OWN", "CRY", "HOT", "BOX", "SKY", "SUN", "DOG", "CAT", "PEN", "CUP", "BAT", "TOY", "HAT", "BAD", "MAD", "SAD", "FIX", "WIN", "TRY", "JOY", "FUN", "FIT", "TIP", "LEG", "ARM", "EGG", "BAG", "CAR", "BIT", "PET", "COW", "BUS", "JOB", "FAT", "GAP", "GAS", "GUM", "HIT", "INK", "JAR", "JET", "LAP", "LID", "LOG", "MIX", "MUD", "NET", "ODD", "PAN", "PIN", "POT", "RAT", "RIB", "ROD", "TAG", "TAX", "TIN", "TUB", "VAN", "VET", "WEB", "ZIP", "CAP", "DOT", "FIG", "HOPS", "JAM", "MOP", "NAP", "OWL", "PAD", "RAG", "TAP", "WAX", "AGE", "AGO", "AID", "AIM", "ATE", "AWE", "BAR", "BEE", "BET", "BOW", "BYE", "CAB", "COP", "COT", "DAM", "DEN", "DEW", "DIG", "DIN", "DIP", "DUE", "DUG", "DYE", "EAR", "EBB", "EEL", "EGO", "ELF", "ELK", "ERA", "EVE", "FAN", "FAR", "FED", "FEW", "FIB", "FOB", "FOE", "FOG", "FOR", "FRY", "GAY", "GEL", "GEM", "GOT", "GYM", "HAM", "HAY", "HEM", "HEN", "HEY", "HID", "HIP", "HOE", "HOG", "HUB", "HUG", "HUM", "HUN", "HUT", "ION", "IRE", "IVY", "JAW", "JIG", "JOT", "KEG", "KIN", "KIT", "LAD", "LAG", "LAX", "LAY", "LED", "LIP", "LIT", "LOB", "LOP", "LOT", "LUG", "LYE", "MAT", "MAY", "MEN", "MET", "MID", "MOB", "MOW", "NAG", "NAY", "NIL", "NIP", "NOD", "NOR", "NOT", "NUN", "NUT", "OAF", "OAK", "OAR", "OAT", "ODE", "OIL", "ONE", "OPT", "ORB", "ORE", "OUR", "OUT", "OWE", "OWL", "OWN", "PAD", "PAL", "PAN", "PAR", "PAT", "PAW", "PAY", "PEA", "PEG", "PEN", "PER", "PET", "PEW", "PIE", "PIG", "PIN", "PIT", "PLY", "POD", "POP", "POT", "PRY", "PUB", "PUG", "PUN", "PUP", "PUS", "PUT", "QUA", "RAG", "RAM", "RAN", "RAP", "RAT", "RAW", "RAY", "RIB", "RID", "RIG", "RIM", "RIP", "ROB", "ROD", "ROE", "ROT", "ROW", "RUE", "RUG", "RUM", "RUN", "RYE", "SAC", "SAD", "SAG", "SAP", "SAT", "SAW", "SAY", "SEA", "SEC", "SEE", "SET", "SEW", "SEX", "SHE", "SHY", "SIN", "SIP", "SIR", "SIT", "SIX", "SKI", "SKY", "SLY", "SOB", "SOD", "SON", "SOW", "SOY", "SPA", "SPY", "STY", "SUB", "SUE", "SUM", "SUN", "SUP", "TAB", "TAG", "TAN", "TAP", "TAR", "TAX", "TEA", "TEN", "THE", "THY", "TIC", "TIE", "TIN", "TIP", "TOE", "TOM", "TON", "TOO", "TOP", "TOW", "TOY", "TRY", "TUB", "TUG", "TUX", "TWO", "URN", "USE", "VAN", "VAT", "VET", "VIA", "VIE", "VOW", "WAD", "WAG", "WAN", "WAR", "WAS", "WAX", "WAY", "WEB", "WED", "WET", "WHO", "WHY", "WIG", "WIN", "WIT", "WOE", "WON", "WOO", "YAK", "YAM", "YAP", "YAW", "YEA", "YES", "YET", "YOU", "ZEN", "ZIG", "ZIP", "ZOO"],
        4: ["THAT", "WITH", "HAVE", "THIS", "WILL", "YOUR", "FROM", "THEY", "WANT", "BEEN", "GOOD", "MUCH", "SOME", "TIME", "VERY", "WHEN", "COME", "HERE", "JUST", "KNOW", "LIKE", "LONG", "MAKE", "ONLY", "OVER", "THAN", "THEM", "THEN", "WORK", "YEAR", "ALSO", "BACK", "EVEN", "FIND", "GIVE", "MOST", "SUCH", "TAKE", "UPON", "WELL", "LIFE", "CITY", "FREE", "HELP", "PART", "REAL", "SHOW", "SIDE", "STAY", "USER", "BLUE", "FISH", "WIND", "RAIN", "FIRE", "SNOW", "MOON", "STAR", "TREE", "BIRD", "SHIP", "GOLD", "WAVE", "LAKE", "ROCK", "ROAD", "PARK", "FROG", "WOLF", "DARK", "COLD", "WISH", "BOOK", "DOOR", "FAST", "SLOW", "LOVE", "HATE", "KIND", "MIND", "BODY", "FACE", "HEAD", "FOOT", "HAND", "EACH", "MANY", "BOTH", "LAST", "NEXT", "ABLE", "DONE", "SAID", "WERE", "BEST", "GAME", "PLAY", "STOP", "KEEP", "ARMY", "BABY", "BALL", "BANK", "BELL", "BORN", "CARD", "CARE", "CASE", "CASH", "COOL", "COUP", "DEAR", "DEEP", "DESK", "DIET", "DUST", "DUTY", "EAST", "EDGE", "ELSE", "FAIL", "FALL", "FARM", "FEAR", "FEEL", "FELL", "FILE", "FILL", "FLAT", "FOOD", "FORM", "FULL", "GIFT", "GIRL", "GLAD", "GOAL", "GREW", "GROW", "HALF", "HARD", "HIGH", "HILL", "HOLD", "HOLE", "HOME", "HOPE", "HOUR", "HURT", "IDEA", "IRON", "ITEM", "JOIN", "JUMP", "LADY", "LAND", "LEFT", "LESS", "LIST", "LIVE", "LORD", "LOST", "LOUD", "LUCK", "MAIL", "MAIN", "MALE", "MARK", "MEAL", "MEET", "MILE", "MILK", "MISS", "MODE", "MOVE", "NAME", "NEAR", "NECK", "NEWS", "NICE", "NINE", "NONE", "NOSE", "NOTE", "OPEN", "PAGE", "PAID", "PAIN", "PAIR", "PASS", "PAST", "PATH", "PICK", "PINK", "PLAN", "POOR", "PORT", "POST", "PULL", "PURE", "RACE", "RARE", "RATE", "READ", "REST", "RICE", "RICH", "RIDE", "RING", "RISE", "ROLE", "ROLL", "ROOF", "ROOM", "ROOT", "ROSE", "RULE", "SAFE", "SALE", "SALT", "SAME", "SAVE", "SEAT", "SEED", "SEND", "SENT", "SHOP", "SHOT", "SICK", "SIGN", "SING", "SITE", "SIZE", "SKIN", "SLIP", "SOFT", "SONG", "SOON", "SORT", "SOUL", "STEP", "SURE", "TALL", "TEAM", "TELL", "TEST", "TEXT", "THIN", "TILL", "TOOL", "TOUR", "TOWN", "TRUE", "TUBE", "TURN", "TYPE", "UNIT", "USED", "VIEW", "VOTE", "WALK", "WALL", "WARM", "WASH", "WEAR", "WEEK", "WENT", "WEST", "WHAT", "WIDE", "WIFE", "WILD", "WIND", "WINE", "WING", "WIRE", "WISE", "WOOD", "WORD", "YARD", "ZERO", "ZONE", "ACRE", "AIDE", "ALLY", "ARCH", "AREA", "ATOM", "AUTO", "AXIS", "BALE", "BAND", "BARE", "BARK", "BARN", "BASE", "BATH", "BEAD", "BEAK", "BEAM", "BEAN", "BEAR", "BEAT", "BEEF", "BEER", "BELT", "BEND", "BIAS", "BIKE", "BILL", "BIND", "BITE", "BLOW", "BOAT", "BOND", "BONE", "BOOM", "BOOT", "BORE", "BOWL", "BULK", "BULL", "BUMP", "BUSH", "BUSS", "CAGE", "CAKE", "CALM", "CAMP", "CANE", "CAPE", "CART", "CAVE", "CELL", "CHEW", "CHIN", "CHIP", "CLAW", "CLAY", "CLIP", "CLUB", "CLUE", "COAL", "COAT", "CODE", "COIL", "COIN", "CONE", "COOK", "CORD", "CORE", "CORK", "CORN", "COST", "CREW", "CROP", "CROW", "CUBE", "CULT", "CURB", "CURE", "DARE", "DASH", "DATA", "DATE", "DAWN", "DEAF", "DEAL", "DEBT", "DECK", "DEED", "DEER", "DELL", "DENY", "DIAL", "DICE", "DIME", "DINE", "DIP", "DIRT", "DISK", "DIVE", "DOCK", "DOLL", "DOME", "DOOM", "DOSE", "DRAG", "DRAW", "DRIP", "DROP", "DRUG", "DRUM", "DUAL", "DUCK", "DUKE", "DULL", "DUMB", "DUMP", "DUNE", "EAGLE", "EARN", "EASE", "ECHO", "EDIT", "EXIT", "EYES", "FACE", "FACT", "FADE", "FAIR", "FAKE", "FAME", "FANG", "FARE", "FATE", "FEAT", "FEED", "FEET", "FELL", "FELT", "FERN", "FEUD", "FILL", "FILM", "FISH", "FIST", "FIVE", "FLAG", "FLAW", "FLEA", "FLED", "FLEE", "FLEW", "FLEX", "FLIP", "FLOW", "FOAL", "FOAM", "FOIL", "FOLD", "FOLK", "FONT", "FORD", "FORK", "FORT", "FOUL", "FOUR", "FOWL", "FUEL", "FUND", "FURY", "FUSE", "GAIN", "GALE", "GANG", "GATE", "GAZE", "GEAR", "GENE", "GERM", "GLOW", "GLUE", "GNAT", "GOAT", "GOLF", "GOWN", "GRAB", "GRAY", "GRIN", "GRIP", "GRIT", "GULF", "GULL", "GURU", "HAIL", "HAIR", "HALL", "HALT", "HANG", "HARE", "HARK", "HARM", "HARP", "HASH", "HAWK", "HAZE", "HEAP", "HEAT", "HEIR", "HERD", "HERO", "HIRE", "HIVE", "HOAX", "HOBO", "HOCK", "HOGS", "HOOD", "HOOK", "HOOP", "HOPS", "HORN", "HOSE", "HOST", "HULL", "HUMP", "HUNG", "HUNT", "HURL", "HUSH", "HYMN", "ICON", "IDOL", "INCH", "INFO", "IRIS", "ISLE", "ITCH", "JADE", "JAIL", "JEEP", "JERK", "JEST", "JIBE", "JINX", "JOEY", "JOKE", "JOLT", "JOWL", "JUNE", "JUNK", "JURY", "KEEL", "KEEN", "KEPT", "KERN", "KICK", "KILN", "KILT", "KITE", "KIWI", "KNEE", "KNEW", "KNIT", "KNOT", "KNOW", "LACE", "LACK", "LADE", "LAID", "LAIR", "LAMB", "LAME", "LAMP", "LANE", "LARK", "LASH", "LAVA", "LAWN", "LEAF", "LEAK", "LEAN", "LEAP", "LEND", "LENS", "LENT", "LEVY", "LIAR", "LICK", "LIEN", "LIFT", "LILY", "LIMB", "LIME", "LIMP", "LINE", "LINK", "LINT", "LION", "LISP", "LIST", "LIVE", "LOAD", "LOAF", "LOAM", "LOAN", "LOBE", "LOFT", "LOGS", "LONE", "LOOK", "LOOM", "LOOP", "LOOT", "LOPE", "LORD", "LORE", "LOSE", "LOSS", "LOTS", "LOUD", "LOUT", "LOVE", "LOWS", "LUCK", "LUMP", "LUNG", "LURE", "LURK", "LUSH", "LUST", "LUTE", "LYRE", "MAID", "MAIL", "MAIN", "MAKE", "MALE", "MALT", "MANE", "MANY", "MAPS", "MARE", "MARK", "MARS", "MART", "MASK", "MAST", "MATE", "MAUL", "MAZE", "MEAD", "MEAL", "MEAN", "MEAT", "MEEK", "MEET", "MELT", "MEMO", "MEND", "MENU", "MEOW", "MERE", "MESH", "MESS", "MICE", "MILD", "MILE", "MILK", "MILL", "MIME", "MIND", "MINE", "MINK", "MINT", "MIRE", "MIST", "MITE", "MOAN", "MOAT", "MOCK", "MODE", "MOLE", "MOLT", "MONK", "MOOD", "MOON", "MOOR", "MOOT", "MOPE", "MORE", "MOSS", "MOTH", "MOVE", "MUCK", "MULE", "MULL", "MUSE", "MUSH", "MUST", "MUTE", "MYTH", "NAIL", "NAME", "NAPE", "NEAR", "NEAT", "NECK", "NEED", "NEON", "NEST", "NETS", "NEWS", "NEXT", "NICE", "NICK", "NIGH", "NINE", "NODE", "NOEL", "NONE", "NOOK", "NOON", "NORM", "NOSE", "NOTE", "NOUN", "NOVA", "NUDE", "NULL", "NUMB", "OAKS", "OARS", "OATH", "OBEY", "OBOE", "ODDS", "OGLE", "OGRE", "OILS", "OILY", "OKAY", "OMEN", "OMIT", "ONCE", "ONLY", "ONTO", "ONYX", "OOZE", "OPAL", "OPEN", "OPUS", "ORAL", "ORBS", "OTTER", "OUCH", "OURS", "OUST", "OVAL", "OVEN", "OVER", "OWLS", "OWNS", "PACE", "PACK", "PACT", "PAGE", "PAID", "PAIL", "PAIN", "PAIR", "PALE", "PALL", "PALM", "PANE", "PANG", "PANT", "PAPA", "PARE", "PARK", "PART", "PASS", "PAST", "PATH", "PAVE", "PAWN", "PEAK", "PEAL", "PEAR", "PEAT", "PECK", "PEEK", "PEEL", "PEEP", "PEER", "PELT", "PEND", "PENT", "PERK", "PERT", "PEST", "PETS", "PIER", "PIKE", "PILE", "PILL", "PINE", "PING", "PINK", "PINT", "PIPE", "PITY", "PLAN", "PLAT", "PLEA", "PLOT", "PLOW", "PLUM", "PLUS", "POEM", "POET", "POKE", "POLE", "POLL", "POLO", "POND", "PONY", "POOL", "POOR", "POPE", "PORE", "PORK", "PORT", "POSE", "POST", "POUR", "POUT", "PRAY", "PREP", "PREY", "PRIG", "PRIM", "PROP", "PUFF", "PULL", "PULP", "PUMA", "PUMP", "PUNK", "PUNT", "PURE", "PUSH", "QUAD", "QUIT", "QUIZ", "RACE", "RACK", "RAFT", "RAGE", "RAID", "RAIL", "RAIN", "RAKE", "RAMP", "RANG", "RANK", "RANT", "RARE", "RASH", "RATE", "RAVE", "RAYS", "READ", "REAL", "REAM", "REAP", "REAR", "REED", "REEF", "REEK", "REEL", "RELY", "RENT", "REST", "RICE", "RICH", "RIDE", "RIFE", "RIFT", "RILL", "RIME", "RIND", "RING", "RINK", "RIOT", "RIPE", "RISE", "RISK", "RITE", "ROAD", "ROAM", "ROAN", "ROAR", "ROBE", "ROCK", "RODE", "ROLE", "ROLL", "ROOF", "ROOM", "ROOT", "ROPE", "ROSE", "ROSY", "ROTE", "ROUE", "ROUT", "ROVE", "ROWS", "RUBY", "RUDE", "RUFF", "RUGS", "RUIN", "RULE", "RUNG", "RUNT", "RUSE", "RUSH", "RUST", "RUTH", "SACK", "SAFE", "SAGE", "SAID", "SAIL", "SALE", "SALT", "SAME", "SAND", "SANE", "SANG", "SANK", "SANS", "SAPS", "SASH", "SASS", "SAVE", "SCAN", "SCAR", "SEAL", "SEAM", "SEAT", "SEED", "SEEK", "SEEM", "SEEN", "SEER", "SELF", "SELL", "SEND", "SENT", "SETS", "SHAD", "SHAG", "SHAM", "SHED", "SHEW", "SHIM", "SHIN", "SHIP", "SHOD", "SHOE", "SHOP", "SHOT", "SHOW", "SHUN", "SHUT", "SICK", "SIDE", "SIFT", "SIGH", "SIGN", "SILK", "SILL", "SILO", "SILT", "SINE", "SING", "SINK", "SIRE", "SITE", "SIZE", "SKEW", "SKID", "SKIM", "SKIN", "SKIP", "SKIS", "SKIT", "SLAB", "SLAM", "SLAP", "SLAT", "SLED", "SLEW", "SLID", "SLIM", "SLIP", "SLIT", "SLOP", "SLOT", "SLOW", "SLUG", "SLUM", "SLUR", "SMUG", "SNAG", "SNAP", "SNIP", "SNOW", "SNUB", "SNUG", "SOAK", "SOAP", "SOAR", "SOBS", "SODA", "SOFA", "SOFT", "SOIL", "SOLD", "SOLE", "SOLO", "SOME", "SONG", "SONS", "SOON", "SOOT", "SORE", "SORT", "SOUL", "SOUP", "SOUR", "SOWN", "SPAN", "SPAR", "SPAT", "SPEC", "SPED", "SPEW", "SPIN", "SPIT", "SPOT", "SPUR", "STAB", "STAG", "STAR", "STAY", "STEM", "STEP", "STEW", "STIR", "STOP", "STOW", "STUB", "STUD", "STUN", "SUCH", "SUDS", "SUED", "SUES", "SUET", "SUIT", "SULK", "SUMS", "SUNG", "SUNK", "SUNS", "SURE", "SURF", "SWAB", "SWAG", "SWAM", "SWAN", "SWAP", "SWAY", "SWIG", "SWIM", "SWUM", "TACK", "TACT", "TAGS", "TAIL", "TAKE", "TALC", "TALE", "TALK", "TALL", "TAME", "TANG", "TANK", "TAPE", "TAPS", "TARE", "TARN", "TARP", "TART", "TASK", "TAUT", "TAXI", "TEAL", "TEAM", "TEAR", "TEAS", "TEAT", "TEEM", "TEEN", "TELL", "TEND", "TENT", "TERM", "TERN", "TEST", "TEXT", "THAN", "THAT", "THAW", "THEE", "THEM", "THEN", "THEY", "THIN", "THIS", "THOU", "THUD", "THUG", "TICK", "TIDE", "TIDY", "TIED", "TIER", "TIFF", "TILE", "TILL", "TILT", "TIME", "TINE", "TINT", "TINY", "TIPS", "TIRE", "TOAD", "TOED", "TOES", "TOFU", "TOGA", "TOIL", "TOLD", "TOLL", "TOMB", "TOME", "TONE", "TONS", "TOOK", "TOOL", "TOOT", "TOPS", "TORE", "TORN", "TOSS", "TOTE", "TOUR", "TOWN", "TOYS", "TRAM", "TRAP", "TRAY", "TREE", "TREK", "TRIM", "TRIO", "TRIP", "TROD", "TROT", "TRUE", "TUBA", "TUBE", "TUBS", "TUCK", "TUFT", "TUNA", "TUNE", "TURF", "TURN", "TUSH", "TUSK", "TWIG", "TWIN", "TWIT", "TWOS", "TYPE", "TYPO", "UNDO", "UNIT", "UNTO", "UPON", "URGE", "URNS", "USED", "USER", "USES", "VAIN", "VALE", "VAMP", "VANE", "VANS", "VASE", "VAST", "VATS", "VEAL", "VEER", "VEIL", "VEIN", "VEND", "VENT", "VERB", "VERT", "VERY", "VEST", "VETO", "VETS", "VIAL", "VICE", "VIEW", "VILE", "VINE", "VISA", "VISE", "VOID", "VOLT", "VOTE", "VOWS", "WADE", "WAFT", "WAGE", "WAIF", "WAIL", "WAIT", "WAKE", "WALK", "WALL", "WAND", "WANE", "WANT", "WARD", "WARE", "WARM", "WARN", "WARP", "WARS", "WART", "WARY", "WASH", "WASP", "WATT", "WAVE", "WAVY", "WAXY", "WAYS", "WEAK", "WEAL", "WEAN", "WEAR", "WEBS", "WEDD", "WEDS", "WEED", "WEEK", "WEEP", "WELD", "WELL", "WELT", "WENT", "WERE", "WEST", "WETS", "WHAM", "WHAT", "WHEE", "WHEN", "WHET", "WHEW", "WHEY", "WHIP", "WHIT", "WHIZ", "WHOA", "WHOM", "WIDE", "WIFE", "WIGS", "WILD", "WILE", "WILL", "WILT", "WILY", "WIND", "WINE", "WING", "WINK", "WINS", "WIPE", "WIRE", "WIRY", "WISE", "WISH", "WISP", "WITH", "WITS", "WOAD", "WOES", "WOLF", "WOMB", "WONT", "WOOD", "WOOF", "WOOL", "WORD", "WORE", "WORK", "WORM", "WORN", "WOVE", "WREN", "WRIT", "XRAY", "YACH", "YAKS", "YAMS", "YANK", "YARD", "YARN", "YAWL", "YAWN", "YAWS", "YEAH", "YEAR", "YEAS", "YELL", "YELP", "YETI", "YOGA", "YOKE", "YORE", "YOUR", "YULE", "ZEAL", "ZERO", "ZEST", "ZINC", "ZING", "ZIPS", "ZONE", "ZOOM", "ZOOS"],
        5: ["THEIR", "THERE", "WHICH", "ABOUT", "THESE", "OTHER", "WORDS", "COULD", "WRITE", "FIRST", "WATER", "AFTER", "WHERE", "RIGHT", "THINK", "THREE", "YEARS", "PLACE", "SOUND", "GREAT", "AGAIN", "EVERY", "FOUND", "HOUSE", "LARGE", "NEVER", "NIGHT", "POINT", "WORLD", "BELOW", "EARTH", "LIGHT", "MIGHT", "MUSIC", "PAPER", "SMALL", "STATE", "STUDY", "THOSE", "UNDER", "WHILE", "ALONG", "BEGIN", "CLOSE", "GROUP", "HEART", "LEAVE", "ORDER", "STORY", "YOUNG", "APPLE", "SMILE", "BREAD", "POWER", "FRUIT", "TABLE", "OCEAN", "PIANO", "SPACE", "DREAM", "STORM", "GREEN", "CLOCK", "CLOUD", "VOICE", "TOUCH", "RIVER", "MOUNT", "SIGHT", "BOARD", "PIECE", "CLEAN", "DIRTY", "ROUND", "BLOCK", "FRAME", "GLASS", "SHIRT", "PAINT", "QUIET", "QUICK", "PROUD", "BRAVE", "SMART", "HEAVY", "READY", "LEARN", "DANCE", "WATCH", "STAND", "KNOWN", "SINCE", "UNTIL", "STILL", "BRING", "AHEAD", "ALIVE", "ALLOW", "ANGER", "ANGRY", "APPLY", "ARENA", "ARISE", "AWAKE", "AWARE", "BASIC", "BEACH", "BIRTH", "BLACK", "BLAME", "BLIND", "BLOOD", "BRAIN", "BRAND", "BREAK", "BRIEF", "BROAD", "BUILD", "BUILT", "CARRY", "CAUSE", "CHAIN", "CHAIR", "CHART", "CHECK", "CHEST", "CHIEF", "CHILD", "CHINA", "CLAIM", "CLASS", "CLEAR", "CLIMB", "COACH", "COAST", "COUNT", "COURT", "COVER", "CRAFT", "CRASH", "CREAM", "CRIME", "CROSS", "CROWD", "CROWN", "CURVE", "CYCLE", "DAILY", "DEATH", "DELAY", "DEPTH", "DOUBT", "DRAFT", "DRAMA", "DRESS", "DRINK", "DRIVE", "DROVE", "DYING", "EAGER", "EARLY", "EIGHT", "ELITE", "EMPTY", "ENEMY", "ENJOY", "ENTER", "ENTRY", "EQUAL", "ERROR", "EVENT", "EXACT", "EXIST", "EXTRA", "FAITH", "FALSE", "FAULT", "FIELD", "FIFTH", "FIFTY", "FIGHT", "FINAL", "FIXED", "FLAME", "FLASH", "FLEET", "FLOOR", "FLUID", "FOCUS", "FORCE", "FORTH", "FORTY", "FORUM", "FRESH", "FRONT", "FULLY", "FUNNY", "GIANT", "GIVEN", "GLOBE", "GOING", "GRACE", "GRADE", "GRAND", "GRANT", "GRASS", "GROSS", "GROWN", "GUARD", "GUESS", "GUEST", "GUIDE", "HABIT", "HAPPY", "HELLO", "HENRY", "IDEAL", "IMAGE", "INDEX", "INNER", "INPUT", "ISSUE", "JAPAN", "JOINT", "JUDGE", "JUICE", "KNIFE", "LABEL", "LASER", "LATER", "LAUGH", "LAYER", "LEASE", "LEAST", "LEGAL", "LEVEL", "LIMIT", "LOCAL", "LOGIC", "LOOSE", "LOWER", "LUCKY", "LUNCH", "LYING", "MAGIC", "MAJOR", "MAKER", "MARCH", "MARIA", "MATCH", "MAYBE", "MAYOR", "MEANT", "MEDIA", "METAL", "MINOR", "MINUS", "MIXED", "MODEL", "MONEY", "MONTH", "MORAL", "MOTOR", "MOUSE", "MOUTH", "MOVIE", "NEEDS", "NEWLY", "NOISE", "NORTH", "NOTED", "NOVEL", "NURSE", "OCCUR", "OFFER", "OFTEN", "OUGHT", "OUTER", "OWNER", "PANEL", "PAPER", "PARTY", "PEACE", "PETER", "PHASE", "PHONE", "PHOTO", "PILOT", "PITCH", "PLAIN", "PLANE", "PLANT", "PLATE", "POUND", "PRESS", "PRICE", "PRIDE", "PRIME", "PRINT", "PRIOR", "PRIZE", "PROOF", "PROVE", "QUEEN", "QUITE", "RADIO", "RAISE", "RANGE", "RAPID", "RATIO", "REACH", "REFER", "RIVAL", "ROUGH", "ROUTE", "ROYAL", "RURAL", "SCALE", "SCENE", "SCOPE", "SCORE", "SENSE", "SERVE", "SEVEN", "SHAKE", "SHALL", "SHAPE", "SHARE", "SHARP", "SHEET", "SHELF", "SHELL", "SHIFT", "SHOCK", "SHOOT", "SHORT", "SHOWN", "SIXTH", "SIXTY", "SIZED", "SKILL", "SLEEP", "SLIDE", "SMITH", "SMOKE", "SOLID", "SOLVE", "SORRY", "SOUTH", "SPARE", "SPEAK", "SPEED", "SPEND", "SPENT", "SPLIT", "SPOKE", "SPORT", "STAFF", "STAGE", "STAKE", "STEAM", "STEEL", "STEEP", "STICK", "STOCK", "STONE", "STOOD", "STORE", "STRIP", "STUCK", "STYLE", "SUGAR", "SUITE", "SUPER", "SWEET", "TAKEN", "TASTE", "TAXES", "TEACH", "TEETH", "TEXAS", "THANK", "THEFT", "THEME", "THICK", "THINK", "THIRD", "THROW", "TIGHT", "TIMES", "TIRED", "TITLE", "TODAY", "TOPIC", "TOTAL", "TOUGH", "TOWER", "TRACK", "TRADE", "TRAIN", "TREAT", "TREND", "TRIAL", "TRIBE", "TRICK", "TRIP", "TRUCK", "TRUST", "TRUTH", "TWICE", "UNDUE", "UNION", "UNITY", "UPPER", "UPSET", "URBAN", "USAGE", "USUAL", "VALID", "VALUE", "VIDEO", "VIRUS", "VISIT", "VITAL", "VOICE", "WASTE", "WHEEL", "WHOLE", "WHOSE", "WOMAN", "WOMEN", "WORRY", "WORTH", "WRONG", "YOUTH"]
    };

    let audioCtx, targets = [], wheels = [], offsets = [];
    let currentLevelIndex = 1, timeLeft, maxTime, timerInterval, soundEnabled = true;
    let usedBonusWords = new Set();
    let gameActive = false;
    let lastTickTime = 0;

    function toggleSound() {
        soundEnabled = !soundEnabled;
        document.getElementById('sound-toggle').innerText = `SND: ${soundEnabled ? 'ON' : 'OFF'}`;
    }

    function restartGame() { window.location.reload(); }

    function getAudioContext() {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        if (audioCtx.state === 'suspended') audioCtx.resume();
        return audioCtx;
    }

    function playSound(type) {
        if (!soundEnabled) return;
        const ctx = getAudioContext();
        const now = ctx.currentTime;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        
        if (type === 'click') { 
            osc.type = 'sine'; osc.frequency.setValueAtTime(160, now);
            gain.gain.setValueAtTime(0.08, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.04);
            osc.connect(gain); gain.connect(ctx.destination); osc.start(); osc.stop(now + 0.04);
        } else if (type === 'start') {
            [261, 329, 392, 523].forEach((f, i) => {
                const o = ctx.createOscillator(), g = ctx.createGain();
                o.type = 'triangle'; o.frequency.setValueAtTime(f, now + (i * 0.08));
                g.gain.setValueAtTime(0.1, now + (i * 0.08)); g.gain.exponentialRampToValueAtTime(0.01, now + (i * 0.08) + 0.2);
                o.connect(g); g.connect(ctx.destination); o.start(now + (i * 0.08)); o.stop(now + (i * 0.08) + 0.2);
            });
        } else if (type === 'cheer') {
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
            [523, 659, 783, 1046].forEach((f, i) => {
                const o = ctx.createOscillator(), g = ctx.createGain();
                o.type = 'square'; o.frequency.setValueAtTime(f, now + (i * 0.1));
                g.gain.setValueAtTime(0.1, now + (i * 0.1)); g.gain.linearRampToValueAtTime(0, now + (i * 0.1) + 0.3);
                o.connect(g); g.connect(ctx.destination); o.start(now + (i * 0.1)); o.stop(now + (i * 0.1) + 0.4);
            });
        } else if (type === 'victory_final') {
            [523, 659, 783, 1046, 1318, 1567].forEach((f, i) => {
                const o = ctx.createOscillator(), g = ctx.createGain();
                o.type = 'triangle'; o.frequency.setValueAtTime(f, now + (i * 0.12));
                g.gain.setValueAtTime(0.15, now + (i * 0.12)); g.gain.linearRampToValueAtTime(0, now + (i * 0.12) + 0.6);
                o.connect(g); g.connect(ctx.destination); o.start(now + (i * 0.12)); o.stop(now + (i * 0.12) + 0.7);
            });
        } else if (type === 'gameover') {
            osc.type = 'square'; osc.frequency.setValueAtTime(150, now);
            osc.frequency.exponentialRampToValueAtTime(40, now + 1.2);
            gain.gain.setValueAtTime(0.25, now); gain.gain.linearRampToValueAtTime(0, now + 1.2);
            osc.connect(gain); gain.connect(ctx.destination); osc.start(); osc.stop(now + 1.2);
        } else if (type === 'tick') {
            osc.type = 'sine'; 
            osc.frequency.setValueAtTime(400, now); // Higher crisp tick
            gain.gain.setValueAtTime(0.1, now);
            gain.gain.exponentialRampToValueAtTime(0.001, now + 0.04);
            osc.connect(gain); gain.connect(ctx.destination);
            osc.start(now); osc.stop(now + 0.04);
        }
    }

    function updatePowerBars() {
        if (!gameActive) return;
        const pct = (timeLeft / maxTime) * 100;
        const bar = document.getElementById('fill-bar');
        bar.style.height = Math.max(0, Math.min(100, pct)) + "%";
        
        if (pct > 50) {
            bar.style.backgroundColor = 'var(--green)';
        } else if (pct > 25) {
            bar.style.backgroundColor = 'var(--alert)';
        } else {
            bar.style.backgroundColor = 'var(--red)';
            // Dedicated tick trigger
            let tickInterval = pct > 12 ? 800 : (pct > 6 ? 400 : 200); 
            let cur = Date.now();
            if (cur - lastTickTime > tickInterval) {
                playSound('tick');
                lastTickTime = cur;
            }
        }

        document.getElementById('stat-time').innerText = formatTime(timeLeft);
        if (timeLeft <= 0) gameOver();
    }

    function formatTime(ms) {
        const s = Math.max(0, Math.floor(ms / 1000));
        return `${Math.floor(s/60)}:${(s%60).toString().padStart(2, '0')}`;
    }

    function gameOver() {
        gameActive = false;
        clearInterval(timerInterval);
        playSound('gameover');
        document.getElementById('main-ui').classList.add('hidden');
        document.getElementById('game-over-ui').classList.remove('hidden');
        for(let i=0; i<wordLen; i++) {
            offsets[i] = 8;
            updateStrip(i, true);
        }
    }

    function initGame() { 
        gameActive = true;
        playSound('start'); 
        document.getElementById('splash').classList.add('hidden'); 
        document.getElementById('pb-container').classList.remove('hidden');
        loadLevel(); 
        timerInterval = setInterval(() => { timeLeft -= 100; updatePowerBars(); }, 100);
    }

    function loadLevel() {
        const times = {1: 60000, 2: 120000, 3: 180000};
        maxTime = times[currentLevelIndex];
        timeLeft = maxTime;
        usedBonusWords.clear();
        wordLen = currentLevelIndex + 2;
        const list = dict[wordLen];
        targets = [list[Math.floor(Math.random()*list.length)], ""];
        do { targets[1] = list[Math.floor(Math.random()*list.length)]; } while(targets[0] === targets[1]);
        
        document.getElementById('stat-lvl').innerText = currentLevelIndex;
        document.querySelectorAll('.lvl-step').forEach(s => s.classList.remove('active'));
        document.getElementById(`lvl-step-${currentLevelIndex}`).classList.add('active');
        document.getElementById('game-area').classList.remove('hidden');
        buildWheels();
    }

    function buildWheels() {
        const grid = document.getElementById('main-grid'); grid.innerHTML = "";
        wheels = []; offsets = new Array(wordLen).fill(8);
        for(let i=0; i<wordLen; i++) {
            let chars = [targets[0][i], targets[1][i]];
            while(chars.length < 8) {
                let r = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)];
                if(!chars.includes(r)) chars.push(r);
            }
            wheels[i] = [chars[0], chars[1], ...chars.slice(2).sort(() => Math.random() - 0.5)];
            const group = document.createElement('div');
            group.className = 'column-group';
            group.innerHTML = `<div class="wheel-window"><div class="wheel-strip" id="strip-${i}"></div></div>
                <button class="arrow-btn" onclick="spin(${i}, 1)">â–²</button>
                <button class="arrow-btn" onclick="spin(${i}, -1)">â–¼</button>`;
            grid.appendChild(group);
            const strip = document.getElementById(`strip-${i}`);
            new Array(5).fill(wheels[i]).flat().forEach(c => {
                const cell = document.createElement('div'); cell.className = 'letter-cell'; cell.innerText = c; strip.appendChild(cell);
            });
            updateStrip(i, false);
        }
        for(let i=0; i<wordLen; i++) { offsets[i] = 8 + Math.floor(Math.random() * 7) + 1; updateStrip(i, false); }
    }

    function spin(i, d) {
        if (!gameActive) return;
        playSound('click'); offsets[i] += d; updateStrip(i, true);
        setTimeout(() => { if (offsets[i] < 8 || offsets[i] >= 16) { offsets[i] = (offsets[i]%8)+8; updateStrip(i, false); } }, 200);
    }

    function updateStrip(i, anim) {
        const s = document.getElementById(`strip-${i}`); if(!s) return;
        s.style.transition = anim ? "transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)" : "none";
        s.style.transform = `translateY(-${offsets[i] * 55}px)`;
    }

    function checkSolution() {
        if (!gameActive) return;
        let w1 = "", w2 = "";
        for(let i=0; i<wordLen; i++) { w1 += wheels[i][offsets[i]%8]; w2 += wheels[i][(offsets[i]+1)%8]; }
        
        const msg = document.getElementById('msg-box');
        if(w1 === targets[0] && w2 === targets[1]) {
            gameActive = false;
            if(currentLevelIndex === 3) playSound('victory_final');
            else playSound('cheer');
            
            for(let i=0; i<wordLen; i++) {
                const c = document.getElementById(`strip-${i}`).children;
                c[offsets[i]].classList.add('correct'); c[offsets[i]+1].classList.add('correct');
            }
            setTimeout(() => {
                if(currentLevelIndex < 3) { 
                    currentLevelIndex++; 
                    gameActive = true; 
                    loadLevel(); 
                } else { 
                    clearInterval(timerInterval);
                    document.getElementById('pb-container').classList.add('hidden');
                    document.getElementById('main-ui').classList.add('hidden');
                    document.getElementById('victory-ui').classList.remove('hidden');
                }
            }, 1500);
        } else {
            let foundBonus = false;
            [w1, w2].forEach(w => {
                if(dict[wordLen].includes(w) && !usedBonusWords.has(w)) {
                    timeLeft = Math.min(maxTime, timeLeft + (maxTime * 0.15));
                    usedBonusWords.add(w);
                    foundBonus = true;
                }
            });

            if (foundBonus) {
                msg.innerText = "BONUS WORD! +POWER"; msg.style.color = "var(--green)";
            } else {
                msg.innerText = "NOT QUITE!"; msg.style.color = "var(--red)";
            }
            setTimeout(() => { if(gameActive) { msg.innerText = "Find the hidden words!"; msg.style.color = "var(--purple)"; } }, 1500);
        }
    }

    function giveClue() {
        if (!gameActive) return;
        timeLeft -= (maxTime * 0.15);
        const col = Math.floor(Math.random() * wordLen);
        const old = offsets[col]; offsets[col] = 8; updateStrip(col, true);
        const cells = document.getElementById(`strip-${col}`).children;
        cells[8].classList.add('clue-flash'); cells[9].classList.add('clue-flash');
        const m = document.getElementById('msg-box'); m.innerText = "POWER DRAINED!"; m.style.color = "var(--red)";
        setTimeout(() => {
            cells[8].classList.remove('clue-flash'); cells[9].classList.remove('clue-flash');
            if(gameActive) {
                offsets[col] = old; updateStrip(col, true);
                m.innerText = "Find the hidden words!"; m.style.color = "var(--purple)";
            }
        }, 2000);
    }

    function shareScore() {
        const text = `ðŸŽ¡ Word Wheel Deluxe ðŸŽ¡\nI solved the wheel before my power ran out!\nCan you beat me? https://cuppatom99.github.io/word-wheel/`;
        if (navigator.share && /Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
            navigator.share({ title: 'Word Wheel Deluxe', text: text }).catch(console.error);
        } else {
            navigator.clipboard.writeText(text).then(() => {
                const status = document.getElementById('share-status');
                status.classList.remove('hidden');
                setTimeout(() => status.classList.add('hidden'), 3500);
            });
        }
    }

    function shuffleWheels(anim) { if(!gameActive) return; for(let i=0; i<wordLen; i++) { offsets[i] = 8 + Math.floor(Math.random() * 7) + 1; updateStrip(i, anim); } }

    const c1 = document.getElementById('title-1'), c2 = document.getElementById('title-2');
    [..."WORD"].forEach((l, i) => c1.innerHTML += `<span class="title-letter" style="animation-delay:${i*0.1}s">${l}</span>`);
    [..."WHEEL"].forEach((l, i) => c2.innerHTML += `<span class="title-letter" style="animation-delay:${(i+4)*0.1}s">${l}</span>`);
</script>
</body>
</html>
